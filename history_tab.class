<script type='text/javascript'>

	// This .class file is not 100% self-cotained.  It presently requies JavaScript code form teh daily_tab.class

	// How to I make it both self-contianed AND have code reuse?

</script>

<?php
class History
{
	function __construct()
	{
		//echo 'hi!';
	}

	// How about making a generic Tab class and extending that to create specific tabs and setting properties to add things to the toolbar?
	function displayTab()
	{
		global $thermostats;
		global $show_date;
		$htmlString = '';

		$htmlString .= "<div class='tab' id='history'> <a href='#history'> History </a>";
		$htmlString .= "	<div class='container'>";
		$htmlString .= "		<div class='tab-toolbar'>";
		$htmlString .= "			<input type='button' onClick='javascript: display_historic_chart();' value='Show'>";
		$htmlString .= "			<select id='chart.history.thermostat'>";

		// Let user pick which thermostat to show, but always show ONLY (new feature - show multiple?) one of them!
		foreach( $thermostats as $thermostatRec )
		{
			$htmlString .= "<option ";
			if( $id == $thermostatRec['id'] )
			{
				$htmlString .= "selected ";
			}
			$htmlString .= "value='{$thermostatRec['id']}'>{$thermostatRec['name']}</option>";
		}
		$htmlString .= "			</select>";

		// Let user pick which temperature to show, but ALWAYS show at least one of them!
		$htmlString .= "			<select id='history_selection'>";
		$htmlString .= "				<option value='0' selected>Outoor</option>";
		$htmlString .= "				<option value='1'>Indoor</option>";
		$htmlString .= "				<option value='2'>Both</option>";
		$htmlString .= "			</select>";

		$htmlString .= "			Timeframe <input type='text' id='interval_length' value='21' size='3'>";
		$htmlString .= "			<select id='interval_measure' style='width: 65px'>";
		$htmlString .= "				<option value='0' selected>days</option>";
		$htmlString .= "				<option value='1'>weeks</option>";
		$htmlString .= "				<option value='2'>months</option>";
		$htmlString .= "			</select>";

		$htmlString .= "			ending on <input type='date' id='chart.history.toDate' size='10' value='{$show_date}' max='{$show_date}' step='1'/>";

		$htmlString .= "			&nbsp;&nbsp;Optionally show HVAC runtimes<input type='checkbox' id='show_hvac_runtime' name='show_hvac_runtime'/>";
		$htmlString .= "			<input type='button' onClick='javascript: deleteCookies(1);' value='Un-save settings' style='float: right;'>";
		$htmlString .= "		</div>";

		$htmlString .= "		<div class='content'>";
		$htmlString .= "			<br>";
		$htmlString .= "			<div class='thermo_chart'>";
		$htmlString .= "				<img id='history_chart' src='img/need_default.png' alt='All Time History'>";
		$htmlString .= "			</div>";
		$htmlString .= "			<script type='text/javascript'>";
		// Draw the chart
		$htmlString .= "				display_historic_chart();";
		$htmlString .= "			</script>";
		$htmlString .= "		</div>";
		$htmlString .= "	</div>";
		$htmlString .= "</div>";
		$htmlString .= "<div class='tab_gap'></div>";


		echo $htmlString;
	}
}
?>